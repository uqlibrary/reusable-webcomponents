<!doctype html>
<html style="padding: 0; margin: 0" lang="en">
<head>
    <title>UQ Library - Reusable Web Components</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="https://static.uq.net.au/v6/fonts/Roboto/roboto.css" />
    <link rel="stylesheet" type="text/css" href="https://static.uq.net.au/v9/fonts/Merriweather/merriweather.css" />
    <link rel="stylesheet" type="text/css" href="https://static.uq.net.au/v13/fonts/Montserrat/montserrat.css">
    <script>
        (function() {
            // Set to the event you want to track
            var eventName = 'click',
                // Set to false if you don't want to use capture phase
                useCapture = true,
                // Set to false if you want to track all events and not just those in shadow DOM
                trackOnlyShadowDom = true;

            var callback = function(event) {
                if ('composed' in event && typeof event.composedPath === 'function') {
                    // Get the path of elements the event climbed through, e.g.
                    // [span, div, div, section, body]
                    var path = event.composedPath();

                    // Fetch reference to the element that was actually clicked
                    var targetElement = path[0];

                    // Check if the element is WITHIN the shadow DOM (ignoring the root)
                    var shadowFound = path.length ? path.filter(function(i) {
                        return !targetElement.shadowRoot && !!i.shadowRoot;
                    }).length > 0 : false;

                    // If only shadow DOM events should be tracked and the element is not within one, return
                    //if (trackOnlyShadowDom && !shadowFound) return;

                    // Push to dataLayer
                    if (shadowFound) {
                        window.dataLayer.push({
                            event: "gtm.click",

                            'gtm.element': targetElement,
                            'gtm.elementClasses': targetElement.className || '',
                            'gtm.elementId': targetElement.id || '',
                            'gtm.elementTarget': targetElement.target || '',
                            'gtm.elementUrl': targetElement.href || targetElement.action || '',
                            inShadowDom: shadowFound

                        });
                    } else {
                        window.dataLayer.push({
                            event: "gtm.click",
                            inShadowDom: shadowFound
                        });
                    }
                }
            };

            document.addEventListener(eventName, callback, useCapture);
        })();
    </script>
</head>
<body style="padding: 0; margin: 0; font-family: 'Roboto', sans-serif">
  <!-- This is a test GTM code - replace with your sites GTM -->
  <uq-gtm gtm="GTM-K597ZS"></uq-gtm>
  <uq-header
          hidelibrarymenuitem="true"
          searchlabel="library.uq.edu.au"
          searchurl="http://library.uq.edu.au"
          skipnavid="skiptohere"
  ></uq-header>

  <uq-site-header
          sitetitle="Library Test"
          siteurl="http://www.library.uq.edu.au"
          showmenu="true"
          showloginbutton="true"
  >
      <slot name="site-utilities"></slot>
  </uq-site-header>

  <alert-list></alert-list>

  <div style="min-height: 300px; margin-left: auto; margin-right: auto; max-width: 960px; padding: 1rem;">
      <h1><a href="#" id="skiptohere">Dummy representation of a website that includes Web Components</a></h1>

      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut congue vel massa ac volutpat. Vivamus scelerisque, leo pretium elementum finibus, libero risus condimentum eros, at gravida diam turpis vitae nulla. Ut in purus non quam ultricies sodales. Etiam dapibus gravida dignissim. Donec laoreet sagittis arcu, eget suscipit tellus tristique a. Aenean ullamcorper lacinia nisi non volutpat. Nam viverra sem diam, id faucibus nulla vehicula faucibus. Aenean ultricies purus sit amet condimentum semper. Sed tempor iaculis molestie. Suspendisse consequat est eget risus malesuada ultricies. In sagittis vel sem a elementum. Suspendisse vulputate mattis volutpat. Quisque interdum sapien id urna euismod, id bibendum dolor luctus. Proin egestas, lacus nec ultricies efficitur, urna est molestie libero, tincidunt tempor purus ipsum sed nisi. Praesent molestie sem eu imperdiet aliquam.</p>
  </div>

  <connect-footer></connect-footer>

  <uq-footer
          loginurl="http://library.uq.edu.au"
  ></uq-footer>
</body>

</html>
