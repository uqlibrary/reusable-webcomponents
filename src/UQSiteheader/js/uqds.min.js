"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var uq=function(e){var t=function(){function n(e,t){_classCallCheck(this,n),this.nav=e,this.navClass=t,this.toggleClass="jsNavToggle",this.openModifier="".concat(this.navClass,"__list--open"),this.levelOpenModifier="".concat(this.navClass,"__list-item--open"),this.level1Class="".concat(this.navClass,"__list--level-1"),this.level2Class="".concat(this.navClass,"__list--level-2"),this.reverseClass="".concat(this.navClass,"__list--reverse"),this.subNavClass="".concat(this.navClass,"__list-item--has-subnav"),this.subToggleClass="".concat(this.navClass,"__sub-toggle"),this.init=this.init.bind(this),this.handleToggle=this.handleToggle.bind(this),this.handleMobileToggle=this.handleMobileToggle.bind(this),this.setOrientation=this.setOrientation.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.init()}return _createClass(n,[{key:"init",value:function(){var t=this,e=document.querySelector(".".concat(this.toggleClass)),n=this.nav.querySelectorAll(".".concat(this.subNavClass)),s=this.nav.querySelectorAll(".".concat(this.subNavClass," > a")),i=this.nav.querySelectorAll(".".concat(this.level2Class," .").concat(this.subNavClass)),a=this.nav.querySelectorAll(".".concat(this.level2Class," .").concat(this.subNavClass," > a")),l=this.nav.querySelectorAll("li > a"),o=this.nav.querySelectorAll(".".concat(this.subToggleClass));e.addEventListener("click",this.handleMobileToggle),n.forEach(function(e){t.setOrientation(e),e.addEventListener("mouseenter",t.handleToggle),e.addEventListener("mouseleave",t.handleToggle)}),s.forEach(function(e){window.matchMedia("(min-width: 1024px)").matches&&e.addEventListener("touchend",t.handleToggle)}),i.forEach(function(e){t.setOrientation(e),e.addEventListener("mouseenter",t.handleToggle),e.addEventListener("mouseleave",t.handleToggle)}),a.forEach(function(e){e.addEventListener("touchend",t.handleToggle)}),l.forEach(function(e){e.addEventListener("keydown",t.handleKeyPress)}),o.forEach(function(e){e.addEventListener("click",t.handleToggle)})}},{key:"handleMobileToggle",value:function(e){var t=this,n=e.target,s=this.nav.querySelectorAll(".".concat(this.level1Class)),i="true"===n.getAttribute("aria-expanded");n.classList.toggle("uq-site-header__navigation-toggle--close"),n.setAttribute("aria-expanded",!i),s.forEach(function(e){e.classList.toggle(t.openModifier),e.setAttribute("aria-expanded",!i)})}},{key:"handleToggle",value:function(e){var t,n;("mouseenter"===e.type||"mouseleave"===e.type)&&window.matchMedia("(max-width: 1024px)").matches||("LI"!==(t=e.target).tagName&&(t=t.parentElement),(n=t.querySelector("ul")).classList.contains(this.openModifier)?this.closeLevel(n,t):("touchend"===e.type&&e.preventDefault(),this.closeAllLevels(),this.openLevel(n,t)))}},{key:"openLevel",value:function(e,t){e.classList.add(this.openModifier),t.classList.add(this.levelOpenModifier),t.querySelector("a").setAttribute("aria-expanded","true")}},{key:"closeLevel",value:function(e,t){e.classList.remove(this.openModifier),this.setOrientation(t),t.classList.remove(this.levelOpenModifier),t.querySelector("a").setAttribute("aria-expanded","false")}},{key:"closeAllLevels",value:function(){var n=this;this.nav.querySelectorAll(".".concat(this.subNavClass)).forEach(function(e){var t=e.querySelector(".".concat(n.level2Class));n.closeLevel(t,e)})}},{key:"setOrientation",value:function(e){var t=e.querySelector(".".concat(this.level2Class)),n=this.reverseClass,s=0;t&&t.getBoundingClientRect()&&(s=t.getBoundingClientRect().right),window.innerWidth<s&&t.classList.add(n)}},{key:"handleKeyPress",value:function(e){var t=e.currentTarget.parentNode,n=t.parentNode;switch(t===n.firstElementChild?"Tab"===e.key&&!0===e.shiftKey&&this.closeLevel(n,n.parentNode):t===n.lastElementChild&&"Tab"===e.key&&!1===e.shiftKey&&this.closeLevel(n,n.parentNode),e.keyCode){case 32:case 37:case 38:case 39:case 40:e.preventDefault(),this.handleToggle(e)}}}]),n}();var n,s,i=(function(e){e.exports=function(){var t=[],n,s=document,e=s.documentElement.doScroll,i="DOMContentLoaded",a=(e?/^loaded|^c/:/^loaded|^i|^c/).test(s.readyState);if(!a)s.addEventListener(i,n=function e(){s.removeEventListener(i,n);a=1;while(n=t.shift()){n()}});return function(e){a?setTimeout(e,0):t.push(e)}}()}(s={path:n,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&s.path)}},s.exports),s.exports),a=function(){function s(e){_classCallCheck(this,s),e=e||"accordion",this.className=e,this.init()}return _createClass(s,[{key:"slideContentUp",value:function(e){var t=this,n=s.getNextSibling(e,".".concat(this.className,"__content"));e.classList.remove("".concat(this.className,"__toggle--active")),e.setAttribute("aria-expanded","false"),n.style.height="0px",n.addEventListener("transitionend",function(){n.classList.remove("".concat(t.className,"__content--active"))},{once:!0}),n.setAttribute("aria-hidden","true")}},{key:"slideContentDown",value:function(e){var t=s.getNextSibling(e,".".concat(this.className,"__content"));e.classList.add("".concat(this.className,"__toggle--active")),e.setAttribute("aria-expanded","true"),t.classList.add("".concat(this.className,"__content--active")),t.style.height="auto";var n=t.clientHeight+"px";t.style.height="0px",setTimeout(function(){t.style.height=n},0),t.setAttribute("aria-hidden","false")}},{key:"slideUpOthers",value:function(e,t){for(var n=0;n<t.length;n++)t[n]!==e&&t[n].classList.contains("".concat(this.className,"__toggle--active"))&&this.slideContentUp(t[n])}},{key:"handleToggle",value:function(t){var n=this;return function(e){e.preventDefault(),e.target.classList.contains("".concat(n.className,"__toggle--active"))?n.slideContentUp(e.target):(n.slideContentDown(e.target),n.slideUpOthers(e.target,t))}}},{key:"init",value:function(){var n=this;i(function(){var e,t;window.location.hash&&(n.hash=window.location.hash),!n.hash||""===n.hash||(e=document.querySelector("".concat(n.hash,".").concat(n.className,"__content")))&&(t=s.getPrevSibling(e,".".concat(n.className,"__toggle")),n.slideContentDown(t),window.scrollTo(0,t.getBoundingClientRect().top)),document.querySelectorAll(".".concat(n.className)).forEach(function(e){var t=e.querySelectorAll(".".concat(n.className,"__toggle"));t.forEach(function(e){e.addEventListener("click",n.handleToggle(t))})})})}}],[{key:"getNextSibling",value:function(e,t){var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}},{key:"getPrevSibling",value:function(e,t){var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}}]),s}(),l=(o.prototype.align=function(){for(var e=0,t=this.blocks.length,n=0;n<t;n++)this.blocks[n].style.minHeight="",e=Math.max(e,this.blocks[n].clientHeight);for(n=0;n<t;n++)this.blocks[n].style.minHeight=e+"px"},o);function o(e){if(e=e||".grid-menu--equalised",!(this instanceof o))return new o(e);this.blocks="string"!=typeof e?e:document.querySelectorAll(e)}return e.accordion=a,e.gridMenuEqualiser=l,e.siteHeaderNavigation=t,e}({});